<text-view></text-view>

<ng-container *ngIf="item">
	<menu class="top">
		<button *ngIf="item.rated != 0" class="btn btn-rate"(click)="rate(0)">-</button>
		<output>
			{{item.rating}}
		</output>
		<button *ngIf="item.rated != 1" class="btn btn-rate" (click)="rate(1)">+</button>
		<a *ngIf="!discussion" class="btn btn-primary" [routerLink]="['/mcq/view', item.id]">ansehen / diskutieren</a>
		<a class="btn btn-edit" [routerLink]="['/mcq/edit', item.id, 'current']">bearbeiten</a>
		<ng-container *ngIf="auth.admin">
			<a class="btn btn-primary"[routerLink]="['/mcq/history', item.id]">History</a>
			<a class="btn btn-delete" [routerLink]="['/mcq/delete', item.id]">löschen</a>
		</ng-container>
	</menu>
	<div>{{item.question}}</div>
	<ol>
		<li *ngFor="let answer of item.answers">{{answer}}</li>
	</ol>
	<p>Die richtige Lösung ist: {{item.solution + 1}}</p>
	<ng-container *ngIf=discussion>
		<h2>Diskussion</h2>
		<form (ngSubmit)="onSubmit()" #form="ngForm">
			<ng-container *ngIf="!auth.admin">
				<pre>{{item.discussion}}</pre>
			</ng-container>
			<ul>
				<li>
					<label for="discussion">Discussion</label>
					<textarea
							type="text"
							id="discussion"
							name="discussion"
							[(ngModel)]="model.discussion"
							#discussion="ngModel"
							required></textarea>
					<div *ngIf="formErrors.code">{{formErrors.code}}</div>
				</li>
			</ul>
			<menu class="bottom">
				<button class="btn btn-submit" type="submit" [disabled]="!form.form.valid">abschicken</button>
			</menu>
		</form>
	</ng-container>
</ng-container>
